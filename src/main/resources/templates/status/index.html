<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/base :: layout(~{::section})}">
<section th:fragment="content">
    <h1 class="text-2xl md:text-3xl font-semibold">System Status</h1>
    <div class="mt-6 grid gap-4 md:grid-cols-3">
        <!-- Overall -->
        <div class="p-4 rounded-xl border">
            <h2 class="font-medium mb-2">Overall</h2>
            <span class="inline-flex items-center px-2 py-1 rounded text-sm"
                  th:text="${overall.status}"
                  th:classappend="${overall.status} == 'UP' ? 'bg-green-100' :
                                  (${overall.status} == 'DOWN' ? 'bg-red-100' : 'bg-yellow-100')">
                STATUS
            </span>
            <div class="mt-3">
                <h3 class="text-sm font-medium text-gray-700 mb-1">Details</h3>
                <ul class="text-sm text-gray-700 space-y-1"
                    th:if="${overall.details != null and !overall.details.isEmpty()}">
                    <li th:each="e : ${overall.details.entrySet()}">
                        <span class="font-mono" th:text="${e.key}">key</span>:
                        <span class="font-mono" th:text="${e.value}">value</span>
                    </li>
                </ul>
                <p class="text-sm text-gray-500" th:if="${overall.details == null or overall.details.isEmpty()}">brak</p>
            </div>
        </div>

        <!-- Liveness -->
        <div class="p-4 rounded-xl border">
            <h2 class="font-medium mb-2">Liveness</h2>
            <span class="inline-flex items-center px-2 py-1 rounded text-sm"
                  th:text="${liveness.status}"
                  th:classappend="${liveness.status} == 'UP' ? 'bg-green-100' :
                                  (${liveness.status} == 'DOWN' ? 'bg-red-100' : 'bg-yellow-100')">
                STATUS
            </span>
        </div>

        <!-- Readiness -->
        <div class="p-4 rounded-xl border">
            <h2 class="font-medium mb-2">Readiness</h2>
            <span class="inline-flex items-center px-2 py-1 rounded text-sm"
                  th:text="${readiness.status}"
                  th:classappend="${readiness.status} == 'UP' ? 'bg-green-100' :
                                  (${readiness.status} == 'DOWN' ? 'bg-red-100' : 'bg-yellow-100')">
                STATUS
            </span>
        </div>
    </div>

    <div class="mt-8">
        <a href="/api/health" class="text-sm underline">Check raw /api/health route.</a>
    </div>
</section>
</html>
